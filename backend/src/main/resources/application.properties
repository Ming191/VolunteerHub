spring.application.name=volunteer_hub

# ===============================
# DATABASE CONFIGURATION
# ===============================
spring.datasource.url=jdbc:postgresql://localhost:5432/volunteerhub
spring.datasource.username=myuser
spring.datasource.password=mypassword

# ===============================
# JPA / HIBERNATE CONFIGURATION
# ===============================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false

# ===============================
# JWT CONFIGURATION
# ===============================
jwt.secret=ThisIsMySuperSecretKeyForVolunteerHubApplicationThatIsLongEnough
# Access token expiration: 15 minutes (900000 ms)
jwt.expiration=900000
# Refresh token expiration: 30 days (2592000000 ms)
jwt.refresh-token.expiration=2592000000

# ===============================
# APPLICATION URLS
# ===============================
app.frontend-url=http://localhost:3000

# ===============================
# EMAIL CONFIGURATION - Google SMTP
# ===============================
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=user@example.com
spring.mail.password=xxxx xxxx xxxx xxxx
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

gcs.bucket.name=volunteerhub-bucket
gcp.credentials.path=classpath:gcp-credentials.json

spring.rabbitmq.host=localhost
spring.rabbitmq.port=5672
spring.rabbitmq.username=myuser
spring.rabbitmq.password=mypassword

spring.cache.type=redis
spring.data.redis.host=localhost
spring.data.redis.port=6379

rate-limit.redis.host=${SPRING_DATA_REDIS_HOST:localhost}
rate-limit.redis.port=${SPRING_DATA_REDIS_PORT:6379}

spring.cache.redis.time-to-live=600000

rate-limit.default.capacity=100
rate-limit.default.refill-tokens=100
rate-limit.default.refill-duration=1m

rate-limit.rules[0].path=/api/auth/login
rate-limit.rules[0].method=POST
rate-limit.rules[0].capacity=5
rate-limit.rules[0].refill-tokens=5
rate-limit.rules[0].refill-duration=1m

rate-limit.rules[1].path=/api/auth/register
rate-limit.rules[1].method=POST
rate-limit.rules[1].capacity=10
rate-limit.rules[1].refill-tokens=10
rate-limit.rules[1].refill-duration=1h

rate-limit.rules[2].path=/api/events
rate-limit.rules[2].method=POST
rate-limit.rules[2].capacity=10
rate-limit.rules[2].refill-tokens=10
rate-limit.rules[2].refill-duration=1h

rate-limit.rules[3].path=/api/posts/event/**
rate-limit.rules[3].method=POST
rate-limit.rules[3].capacity=50
rate-limit.rules[3].refill-tokens=50
rate-limit.rules[3].refill-duration=1h

rate-limit.rules[4].path=/api/posts/**/comments
rate-limit.rules[4].method=POST
rate-limit.rules[4].capacity=100
rate-limit.rules[4].refill-tokens=100
rate-limit.rules[4].refill-duration=1h

rate-limit.rules[5].path=/api/admin/export/**
rate-limit.rules[5].method=GET
rate-limit.rules[5].capacity=20
rate-limit.rules[5].refill-tokens=20
rate-limit.rules[5].refill-duration=1h

rate-limit.rules[6].path=/api/admin/**
rate-limit.rules[6].capacity=300
rate-limit.rules[6].refill-tokens=300
rate-limit.rules[6].refill-duration=1m

rate-limit.rules[7].path=/api/events/**
rate-limit.rules[7].method=GET
rate-limit.rules[7].capacity=200
rate-limit.rules[7].refill-tokens=200
rate-limit.rules[7].refill-duration=1m

fcm.credentials.path=classpath:fcm-credentials.json

# ===============================
# ACTUATOR & PROMETHEUS METRICS
# ===============================
management.endpoints.web.exposure.include=health,info,prometheus,metrics
management.endpoint.health.show-details=when-authorized
management.endpoint.prometheus.access=unrestricted
management.prometheus.metrics.export.enabled=true

# Custom application info
info.app.name=VolunteerHub
info.app.description=Volunteer Management Platform
info.app.version=1.0.0

# Enable detailed metrics
management.metrics.enable.jvm=true
management.metrics.enable.process=true
management.metrics.enable.system=true
management.metrics.enable.http=true
management.metrics.distribution.percentiles-histogram.http.server.requests=true
management.metrics.tags.application=volunteerhub
management.metrics.tags.environment=local

# ===============================
# TRACING CONFIGURATION
# ===============================
management.tracing.sampling.probability=1.0
management.zipkin.tracing.endpoint=http://tempo:9411/api/v2/spans

# ===============================
# PROMETHEUS CONFIGURATION
# ===============================
prometheus.url=${PROMETHEUS_URL:http://localhost:9090}

# ===============================
# RESPONSE COMPRESSION
# ===============================
server.compression.enabled=true
server.compression.mime-types=application/json,application/xml,text/html,text/xml,text/plain,application/javascript,text/css
server.compression.min-response-size=1024

# ===============================
# RESILIENCE4J CIRCUIT BREAKER
# ===============================

# Prometheus Circuit Breaker (non-critical monitoring)
resilience4j.circuitbreaker.instances.prometheus.failure-rate-threshold=50
resilience4j.circuitbreaker.instances.prometheus.slow-call-rate-threshold=100
resilience4j.circuitbreaker.instances.prometheus.slow-call-duration-threshold=3s
resilience4j.circuitbreaker.instances.prometheus.permitted-number-of-calls-in-half-open-state=3
resilience4j.circuitbreaker.instances.prometheus.sliding-window-type=COUNT_BASED
resilience4j.circuitbreaker.instances.prometheus.sliding-window-size=10
resilience4j.circuitbreaker.instances.prometheus.minimum-number-of-calls=5
resilience4j.circuitbreaker.instances.prometheus.wait-duration-in-open-state=30s
resilience4j.circuitbreaker.instances.prometheus.automatic-transition-from-open-to-half-open-enabled=true

resilience4j.timelimiter.instances.prometheus.timeout-duration=5s

# Google Cloud Storage Circuit Breaker (critical for content)
resilience4j.circuitbreaker.instances.gcs.failure-rate-threshold=60
resilience4j.circuitbreaker.instances.gcs.slow-call-rate-threshold=80
resilience4j.circuitbreaker.instances.gcs.slow-call-duration-threshold=10s
resilience4j.circuitbreaker.instances.gcs.permitted-number-of-calls-in-half-open-state=5
resilience4j.circuitbreaker.instances.gcs.sliding-window-type=COUNT_BASED
resilience4j.circuitbreaker.instances.gcs.sliding-window-size=20
resilience4j.circuitbreaker.instances.gcs.minimum-number-of-calls=10
resilience4j.circuitbreaker.instances.gcs.wait-duration-in-open-state=60s
resilience4j.circuitbreaker.instances.gcs.automatic-transition-from-open-to-half-open-enabled=true

resilience4j.timelimiter.instances.gcs.timeout-duration=15s

# RabbitMQ Circuit Breaker (async operations)
resilience4j.circuitbreaker.instances.rabbitmq.failure-rate-threshold=70
resilience4j.circuitbreaker.instances.rabbitmq.slow-call-rate-threshold=100
resilience4j.circuitbreaker.instances.rabbitmq.slow-call-duration-threshold=2s
resilience4j.circuitbreaker.instances.rabbitmq.permitted-number-of-calls-in-half-open-state=10
resilience4j.circuitbreaker.instances.rabbitmq.sliding-window-type=COUNT_BASED
resilience4j.circuitbreaker.instances.rabbitmq.sliding-window-size=30
resilience4j.circuitbreaker.instances.rabbitmq.minimum-number-of-calls=15
resilience4j.circuitbreaker.instances.rabbitmq.wait-duration-in-open-state=20s
resilience4j.circuitbreaker.instances.rabbitmq.automatic-transition-from-open-to-half-open-enabled=true

resilience4j.timelimiter.instances.rabbitmq.timeout-duration=3s

# Firebase Cloud Messaging Circuit Breaker (push notifications)
resilience4j.circuitbreaker.instances.fcm.failure-rate-threshold=60
resilience4j.circuitbreaker.instances.fcm.slow-call-rate-threshold=80
resilience4j.circuitbreaker.instances.fcm.slow-call-duration-threshold=5s
resilience4j.circuitbreaker.instances.fcm.permitted-number-of-calls-in-half-open-state=5
resilience4j.circuitbreaker.instances.fcm.sliding-window-type=COUNT_BASED
resilience4j.circuitbreaker.instances.fcm.sliding-window-size=20
resilience4j.circuitbreaker.instances.fcm.minimum-number-of-calls=10
resilience4j.circuitbreaker.instances.fcm.wait-duration-in-open-state=30s
resilience4j.circuitbreaker.instances.fcm.automatic-transition-from-open-to-half-open-enabled=true

resilience4j.timelimiter.instances.fcm.timeout-duration=10s